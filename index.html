<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .block{
            width: 1em;
            height: 1em;
            border: 2px solid black;
            margin: 0.1em;
            text-align: center;
        }

        .area{
            width: max-content;
            height: auto;
            border: 2px solid black;
            padding: 5px;
            display: flex;
            flex-direction: column;
        }

        .row{
            display: flex;
            flex-direction: row;
        }

        .result{
            width: 100%;
            height: 1em;
            background-color: black;
            color: white;
            overflow-y: hidden;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="area">
        <div class="row">
            <input class="result">
        </div>
        <div class="row">
            <div class="block">7</div>
            <div class="block">8</div>
            <div class="block">9</div>
            <div class="block">+</div>
        </div>
        <div class="row">
            <div class="block">4</div>
            <div class="block">5</div>
            <div class="block">6</div>
            <div class="block">-</div>
        </div>
        <div class="row">
            <div class="block">1</div>
            <div class="block">2</div>
            <div class="block">3</div>
            <div class="block">/</div>
        </div>
        <div class="row">
            <div class="block">0</div>
            <div class="block">.</div>
            <div class="block">=</div>
            <div class="block">*</div>
        </div>
    </div>
    <script>
        let res = document.querySelector(".result");
        let ops = ["+","/","*","-","="];
        document.querySelectorAll(".block").forEach(function(element) {
            element.addEventListener('click', function() {
                if(element.innerHTML == "="){
                    calculate();
                }else{
                    res.value += element.innerHTML;
                }

                // res.value += element.innerHTML;
                // if(element.innerHTML == "="){
                //     calculate();
                // }else{
                // }
            });
        });

        function GetLength(text){
            let i = 0;
            while(text[i] != null){
                i++
            }
            return i;
        }

        function SubStr(text,i,j){
            let res = "";
            while(i != j){
                res += text[i];
                i ++;
            }
            return res;
        }

        

        function calculate(){
            let len = GetLength(document.querySelector(".result").value);
            let exp = res.value;
            let num = [];
            let op = [];
            let i ,j =0;
            for(i = 0; i < len-1; i++){
                // console.log(`${exp[i]} ${i}`);|
                for(j = i; j < len; j++){
                    console.log(`${i} ${j} ${exp[j]}`)
                    if(ops.includes(exp[j])){
                        num.push(exp.substr(i,j));
                        console.log(SubStr(i,j));
                        op.push(exp[j]);
                        i = j;
                        break;
                    }else if(exp[j+1] == null){
                        len = 0;
                        i -= 1
                    }
                }
            }
            
            console.log(`${i} ${j} ${len}`);
            if(i < GetLength(document.querySelector(".result").value)){
                num.push(exp.substr(i,j))
            }

            console.log(num);
            console.log(op);
        }
    </script>
</body>
</html>